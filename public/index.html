<!DOCTYPE html>
<html>
<head>
    <title>Goal Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- everything vue manages goes here -->
        
        <div id="nav" v-show="display != displayLogin && display != displayRegister">
            <!-- navigation bar stuff -->
            <h1>Goal Tracker</h1>
            <a @click="goHome">Home</a>
            <a @click="goSocial">Find People</a>
            <a @click="goGoals">Explore Goals</a>
            <a @click="logout">Logout</a>
        </div>
        
        <ul id="notifs" v-show="displayNotifs">
            <li v-for="notif, i in notifs">
                {{ notif }}
                <button @click="removeNotif(i)"> Ok </button>
            </li>
            <li v-show="notifs.length > 1"> <button @click="clearNotifs">clear all</button> </li>
        </ul>
        
        <div id="landing" v-show="display == displayLogin || display == displayRegister">
            <!-- everything login goes here -->   
            <div class="centerBlock" v-show="display == displayLogin">
                <h2>Let's Get Started</h2>
                <div><input type="text" placeholder="email" v-model="userEmail"></div>
                <div><input type="text" placeholder="password" v-model="userPassword"></div>
                <div><button @click="login()">Log in</button></div>
                <hr style="width: 80%">
                <h3> Don't have an account? <a @click="goRegister()">Sign Up</a></h3>
            </div> 
            
            <div class="centerBlock" v-show="display == displayRegister"> 
                <h2>Let's Get Started</h2>
                <div><input type="text" placeholder="email" v-model="userEmail"></div>
                <div><input type="text" placeholder="username" v-model="userUsername"></div>
                <div>
                    <input style="width: 50%" type="text" placeholder="First" v-model="userFirst"> 
                    <input style="width: 50%" type="text" placeholder="Last" v-model="userLast">
                </div>
                <div><input type="text" placeholder="password" v-model="userPassword"></div>
                <div><button @click="register()">Sign Up</button></div>
                <hr style="width: 80%">
                <h3> Don't have an account? <a @click="goLogin()">Log In</a><h3>
                
            </div>
        </div>


        <div v-show="display == displayMain">
            <!-- everything on the main page goes here-->
            <input class="searchbar" type="text" placeholder="search goals" v-on:keyup.enter="getUserGoalsFromServer(sessionID)" v-model="userGoalSearch">
            <div v-show="userGoals.length == 0">No goals found. Add some and they'll show up here!</div>
            <button @click="goCreateGoal">Create a goal!</button>
            <button @click="goGoals">Find a goal!</button>
            <div v-for="goal, i in userGoals">
                <div class="column">
                    <div class="card">
                        <div @click="expandGoal(goal)"><b> {{ goal.title }} </b></div>
                        <div> {{ goal.description }} </div>
                        <div> target: {{ goal.frequency }}/{{ goal.timeframe }} days </div>
                        <table>
                            <tr>
                                <th v-for="stat in goalStats[goal.goal_id]"> {{ stat.month + 1 }}/{{ stat.day }} </th>
                            </tr>
                            <tr>
                                <td v-for="stat in goalStats[goal.goal_id]"
                                    @click="toggleStat(stat)" 
                                    v-bind:style="{ backgroundColor: stat.status == 1 ? '#0E9700' : '#FE0006'}">
                                    {{ stat.status == 1 ? '&#10004' : '&#10006' }}
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!--
        <div v-show="display == displaySingleGoalStats">
            <div v-for="stat, i in stats" @click="toggleStat()">
                <div> {{ stat.month }}/{{ stat.day }} </div>
                <div> {{ stat.status }} </div>
            </div> 
        </div>
        -->
        
        <div v-show="display == displaySocial">
            <!-- everything on the social page goes here-->
            <input class="searchbar" type="text" placeholder="search users" v-on:keyup.enter="getUsersFromServer()" v-model="userSearch">
            <div class="user" v-for="user in users" @click="expandUser(user)">
                <div> {{ user.username }} </div>
                <div> {{ user.first_name }} {{ user.last_name }} </div>
            </div>
        </div>
    

        <div v-show="display == displayGoals">
            <!-- everything on the goals page goes here-->
            viewing the explore goals page now
            <input class="searchbar" type="text" placeholder="search goals" v-on:keyup.enter="getGoalsFromServer()" v-model="goalSearch">
            <div v-show="goals.length == 0">No goals found. Add some and they'll show up here!</div>
            <div v-for="goal, i in goals" @click="expandGoal(goal)">
                <div class="column">
                    <div class="card">
                        <div><b> {{ goal.title }} </b></div>
                        <div> {{ goal.description }} </div>
                        <div> target: {{ goal.frequency }}/{{ goal.timeframe }} days </div>
                        <div> <button @click="addUserGoalServer(goal.goal_id)">Set Goal</button></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="goalForm" v-show="display == displayCreateGoal">
            <!-- everything on the create goals page goes here-->
            <h2>Set a goal for yourself (and others!)</h2>
            <div><input type="text" placeholder="title your goal" v-model="goalTitle"></div>
            <div><input type="text" placeholder="give a description of your goal" v-model="goalDescription"></div>
            <div>How often will I do this goal?</div>
            <div>
                <input type="number" placeholder="2" style="width: 32px" v-model="goalFrequency">
                of every
                <input type="number" placeholder="7" style="width: 32px" v-model="goalTimeframe">
                days
                <div><button @click="createAndAddGoal()">Set Goal</button></div>
            </div>
        </div>

    </div>
    <script src="https://unpkg.com/vue@3"></script>
    <script src="app.js"></script>
</body>
</html>
